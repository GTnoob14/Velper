"use strict";(self.webpackChunkconnectionreactfrontend=self.webpackChunkconnectionreactfrontend||[]).push([[424],{105:function(e,t,n){var s=n(3144),r=n(5671),i=(0,s.Z)((function e(t,n,s,i,a,o,c,d,l,u,p,f){(0,r.Z)(this,e),this.public_id=t,this.firstname=n,this.lastname=s,this.password=i,this.email=a,this.age=o,this.country=c,this.state=d,this.city=l,this.biography=u,this.interests=p,this.friendIdList=f}));t.Z=i},6429:function(e,t,n){var s=n(4569),r=n.n(s);r().defaults.withCredentials=!0;var i=r().create({baseURL:"http://localhost:8081/api/v1/",withCredentials:!0,xsrfCookieName:"_csrf",xsrfHeaderName:"X-XSRF-TOKEN"});i.defaults.headers.common={"X-XSRF-TOKEN":(document.cookie.split(";").map((function(e){return e.trim()})).filter((function(e){return e.startsWith("XSRF-TOKEN=")}))[0]||"").replace("XSRF-TOKEN=","")},i.interceptors.response.use((function(e){return e}),(function(e){throw void 0!==e.response&&403!==e.response.status||(window.location.href="/login"),console.log(e),e})),t.Z=i},4466:function(e,t,n){var s=n(5861),r=n(7757),i=n.n(r),a=n(6429),o=n(105);function c(e){return e.data.map((function(e){return new o.Z(e.public_id,e.firstname,e.lastname,null,e.email,e.age,e.country,e.state,e.city,e.biography,e.interests,null)}))}function d(){return(d=(0,s.Z)(i().mark((function e(t,n,s){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/user/friends/find",{params:{scope:t.enum,mutualFriends:n,similarInterests:s}});case 2:return r=e.sent,o=c(r),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,s.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/user/friends/find");case 2:return t=e.sent,n=c(t),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=(0,s.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.get("/user/friends");case 2:return t=e.sent,n=c(t),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.post("/user/friends/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.delete("/user/friends/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h={findFriends:function(){return l.apply(this,arguments)},findFriendsWithSettings:function(e,t,n){return d.apply(this,arguments)},getFriends:function(){return u.apply(this,arguments)},addFriend:function(e){return p.apply(this,arguments)},removeFriend:function(e){return f.apply(this,arguments)}};t.Z=h},4424:function(e,t,n){n.r(t),n.d(t,{default:function(){return re}});var s=n(5671),r=n(3144),i=n(136),a=n(8347),o=n(2791),c=n(9775),d=n(4466),l=n(885),u=n(4395),p=n(8870),f=n(4708),h=n(9953),x=n(3400),m=n(8008),g=n(4663),b=n(890),Z=n(493),v=n(4852),j=n(4721),y=n(9900),w=n(653),k=n(3044),C=n(3701),R=n(184);function M(e){var t=!0;return(0,R.jsx)(Z.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:e.friends.map((function(n){var s=(0,R.jsxs)("div",{children:[t?null:(0,R.jsx)(j.Z,{variant:"inset",component:"li"}),(0,R.jsx)(C.Z,{onClick:function(){return e.openChat(n.public_id)},children:(0,R.jsxs)(v.ZP,{alignitem:"flex-start",children:[(0,R.jsx)(w.Z,{children:(0,R.jsx)(k.Z,{alt:"profile",src:"https://hbs-customs.de/wp-content/uploads/2015/04/blank-profile-picture-973460_640.png"})}),(0,R.jsx)(y.Z,{primary:"".concat(n.firstname," ").concat(n.lastname)})]})})]},n.public_id);return t=!1,s}))})}var F=n(2455),S=n(1135),N=n(703),T=n(5643),_=(0,F.Z)((function(e){return(0,S.Z)({messageRow:{display:"flex",justifyContent:"flex-start"},messageRowRight:{display:"flex",justifyContent:"flex-end"},messageBlue:{position:"relative",marginLeft:"20px",marginBottom:"10px",padding:"10px",color:"white",backgroundColor:"#1520A6",maxWidth:"60%",minWidth:"20%",wordBreak:"break-word",textAlign:"left",font:"400 .9em 'Open Sans', sans-serif",border:"1px solid #051076",borderRadius:"10px","&:after":{content:"''",position:"absolute",width:"0",height:"0",borderTop:"15px solid #1520A6",borderLeft:"15px solid transparent",borderRight:"15px solid transparent",top:"0",left:"-15px"},"&:before":{content:"''",position:"absolute",width:"0",height:"0",borderTop:"17px solid #1520A6",borderLeft:"16px solid transparent",borderRight:"16px solid transparent",top:"-1px",left:"-17px"}},messageOrange:{position:"relative",marginRight:"20px",marginBottom:"10px",padding:"10px",backgroundColor:"white",maxWidth:"60%",minWidth:"20%",wordBreak:"break-word",textAlign:"left",font:"400 .9em 'Open Sans', sans-serif",border:"1px solid grey",borderRadius:"10px","&:after":{content:"''",position:"absolute",width:"0",height:"0",borderTop:"15px solid white",borderLeft:"15px solid transparent",borderRight:"15px solid transparent",top:"0",right:"-15px"},"&:before":{content:"''",position:"absolute",width:"0",height:"0",borderTop:"17px solid grey",borderLeft:"16px solid transparent",borderRight:"16px solid transparent",top:"-1px",right:"-17px"}},messageContent:{padding:0,margin:"0 0 5px 0"},messageTimeStampRight:{position:"absolute",fontSize:".85em",fontWeight:"300",bottom:"0px",right:"6px"},orange:{color:e.palette.getContrastText(T.Z[500]),backgroundColor:T.Z[500],width:e.spacing(4),height:e.spacing(4)},avatarNothing:{color:"transparent",backgroundColor:"transparent",width:e.spacing(4),height:e.spacing(4)},displayName:{marginLeft:"20px"}})})),W=function(e){var t=e.message?e.message:"Empty message was delivered",n=e.timestamp?e.timestamp.split("T")[1].substring(0,5):"",s=_();return(0,R.jsx)("div",{className:s.messageRow,children:(0,R.jsxs)(N.Z,{className:s.messageBlue,elevation:2,children:[(0,R.jsx)("p",{className:s.messageContent,children:t}),(0,R.jsx)("div",{className:s.messageTimeStampRight,children:n})]})})},A=function(e){var t=_(),n=e.message?e.message:"Empty message was delivered",s=e.timestamp?e.timestamp.split("T")[1].substring(0,5):"";return(0,R.jsx)("div",{className:t.messageRowRight,children:(0,R.jsxs)(N.Z,{className:t.messageOrange,elevation:2,children:[(0,R.jsx)("p",{className:t.messageContent,children:n}),(0,R.jsx)("div",{className:t.messageTimeStampRight,children:s})]})})},O=(0,F.Z)((function(e){return(0,S.Z)({paper:{width:"80vw",height:"80vh",maxWidth:"500px",maxHeight:"700px",display:"flex",alignItems:"center",flexDirection:"column",position:"relative"},paper2:{width:"80vw",maxWidth:"500px",display:"flex",alignItems:"center",flexDirection:"column",position:"relative"},container:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},messagesBody:{width:"calc( 100% - 20px )",margin:10,overflowY:"auto",height:"calc( 100% - 80px )",padding:"10px"}})}));function B(e){var t=O();return(0,R.jsx)(N.Z,{id:"style-1",className:t.messagesBody,children:e.messages.map((function(t){return t.public_id!==e.friend_id?(0,R.jsx)(W,{message:t.message,timestamp:t.sentAt},t.id):(0,R.jsx)(A,{message:t.message,timestamp:t.sentAt},t.id)}))})}var L=n(7391),z=n(1686),D=n(6151),E=(0,F.Z)((function(e){return(0,S.Z)({wrapForm:{display:"flex",justifyContent:"center",width:"95%",margin:"".concat(e.spacing(0)," auto")},wrapText:{width:"100%"},button:{}})})),I=function(e){var t=E(),n=o.useState(""),s=(0,l.Z)(n,2),r=s[0],i=s[1];return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("form",{className:t.wrapForm,noValidate:!0,autoComplete:"off",children:[(0,R.jsx)(L.Z,{id:"standard-text",label:"Write...",className:t.wrapText,value:r,onChange:function(e){return i(e.target.value)},onKeyDown:function(t){"Enter"===t.key&&e.sendMessage(r)}}),(0,R.jsx)(D.Z,{variant:"contained",color:"primary",className:t.button,onClick:function(){return e.sendMessage(r)},children:(0,R.jsx)(z.Z,{})})]})})},P=n(5878),X=n(9964),K=n(2731),H=240;var U=function(e){var t=e.window,n=o.useState(!1),s=(0,l.Z)(n,2),r=s[0],i=s[1],a=o.useState(!1),c=(0,l.Z)(a,2),d=c[0],Z=c[1],v=function(){i(!r)},j=(0,R.jsxs)("div",{children:[(0,R.jsx)(g.Z,{}),(0,R.jsx)(M,{friends:e.friends,openChat:function(t){e.setFriend(t),v()}})]}),y=void 0!==t?function(){return t().document.body}:void 0;return void 0===e.friend?(0,R.jsx)("h1",{children:"Go to the 'find' Tab to find some friends you can chat to!"}):(0,R.jsxs)(p.Z,{sx:{display:"flex"},children:[(0,R.jsx)(f.ZP,{}),(0,R.jsx)(u.Z,{sx:{width:{sm:"calc(100% - ".concat(H,"px)")},ml:{sm:"".concat(H,"px")}},children:(0,R.jsxs)(g.Z,{children:[(0,R.jsx)(x.Z,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:v,sx:{mr:2,display:{sm:"none"}},children:(0,R.jsx)(m.Z,{})}),(0,R.jsx)(b.Z,{align:"left",variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:"".concat(e.friend.firstname," ").concat(e.friend.lastname)}),(0,R.jsx)(x.Z,{color:"inherit","aria-label":"show profile of ".concat(e.friend.firstname," ").concat(e.friend.lastname),onClick:function(){return Z(!0)},sx:{mr:2},children:(0,R.jsx)(P.Z,{})})]})}),(0,R.jsxs)(p.Z,{component:"nav",sx:{width:{sm:H},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,R.jsx)(h.ZP,{container:y,variant:"temporary",open:r,onClose:v,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:H}},children:j}),(0,R.jsx)(h.ZP,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:H}},open:!0,children:j})]}),(0,R.jsx)(p.Z,{component:"main",sx:{height:{sm:"100%"},p:3,width:{sm:"calc(100% - ".concat(H,"px)")},position:"absolute",left:{xs:0,sm:H},right:0,top:0,bottom:0},children:(0,R.jsxs)("div",{style:{paddingTop:"50px",paddingBottom:"50px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,R.jsx)(X.Z,{sx:{zIndex:function(e){return e.zIndex.drawer+1}},open:d,onClick:function(){return Z(!1)},children:(0,R.jsx)(K.Z,{public_id:e.friend.public_id,firstname:e.friend.firstname,lastname:e.friend.lastname,age:e.friend.age,email:e.friend.email,country:e.friend.country,state:e.friend.state,city:e.friend.city,biography:e.friend.biography,interests:e.friend.interests,friend:!1,close:!0})}),(0,R.jsx)(B,{messages:e.messages,friend_id:e.friend.public_id,style:{minHeight:"100%"}}),(0,R.jsx)(I,{sendMessage:e.sendMessage,style:{position:"absolute",bottom:0}})]})})]})},G=n(5861),V=n(7757),Y=n.n(V),q=n(6429),J=(0,r.Z)((function e(t,n,r,i,a,o){(0,s.Z)(this,e),this.id=t,this.public_id=n,this.message=r,this.sentAt=i,this.receivedAt=a,this.read=o}));function Q(){return(Q=(0,G.Z)(Y().mark((function e(t){var n;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.Z.get("/chat/".concat(t));case 2:return(n=e.sent.data).map((function(e){return new J(e.id,e.message,e.sentAt,e.receivedAt,e.read)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=(0,G.Z)(Y().mark((function e(t,n){var s;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new J(null,null,t,null,null,!1),e.next=3,q.Z.post("/chat/".concat(n),s);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=(0,G.Z)(Y().mark((function e(t,n){return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.Z.delete("/chat/".concat(n,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te={getMessages:function(e){return Q.apply(this,arguments)},sendMessage:function(e,t){return $.apply(this,arguments)},deleteMessage:function(e,t){return ee.apply(this,arguments)}},ne=te,se=n(3239),re=function(e){(0,i.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).loadMessages=function(){r.loadMessagesOf(r.state.friend.public_id)},r.loadMessagesOf=function(e){ne.getMessages(e).then((function(e){console.log(e),r.setState({messages:e})}))},r.sendMessage=function(e){ne.sendMessage(e,r.state.friend.public_id).then((function(e){r.loadMessages()}))},r.updateFriend=function(e){r.setState({friend:r.state.friends.filter((function(t){return t.public_id===e}))[0]}),r.loadMessagesOf(e)},r.state={friends:[],friend:null,messages:[]},r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){var e=this;d.Z.getFriends().then((function(t){console.log(t),e.setState({friends:t,friend:t[0]}),e.loadMessagesOf(t[0].public_id)}))}},{key:"render",value:function(){return(0,R.jsx)("div",{children:null===this.state.friend?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(se.Z,{}),(0,R.jsx)(c.Z,{value:"chat"})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(U,{friends:this.state.friends,friend:this.state.friend,messages:this.state.messages,setFriend:this.updateFriend,sendMessage:this.sendMessage}),(0,R.jsx)(c.Z,{value:"chat"})]})})}}]),n}(o.Component)},2731:function(e,t,n){var s=n(2982),r=(n(2791),n(7621)),i=n(9504),a=n(890),o=n(6647),c=n(8870),d=n(1918),l=n(2363),u=n(6151),p=n(184);t.Z=function(e){return(0,p.jsxs)(r.Z,{sx:{maxWidth:345,borderRadius:"20px"},elevation:10,children:[(0,p.jsx)(o.Z,{children:(0,p.jsxs)(i.Z,{children:[(0,p.jsx)(a.Z,{gutterBottom:!0,variant:"h5",component:"div",sx:{fontWeight:"bold"},children:"".concat(e.firstname," ").concat(e.lastname," (").concat(e.age,")")}),(0,p.jsx)(a.Z,{variant:"body2",color:"text.secondary",children:"".concat(e.city,", ").concat(e.country," (").concat(e.state,")")}),(0,p.jsx)(a.Z,{variant:"body1",color:"text.primary",style:{textAlign:"justify",margin:"15px 30px 10px 30px"},children:e.biography}),(0,p.jsx)(c.Z,{children:(0,s.Z)(e.interests).map((function(e){return(0,p.jsx)(d.Z,{style:{margin:"5px"},label:e.interest,variant:"outlined"},e.id)}))})]})}),e.friend?(0,p.jsxs)(l.Z,{style:{justifyContent:"center"},children:[(0,p.jsx)(u.Z,{size:"small",sx:{borderRadius:"10px"},color:"primary",variant:"contained",onClick:function(){e.addToFriends(e.public_id),e.next()},children:"Add"}),(0,p.jsx)("div",{style:{width:"30px"}}),(0,p.jsx)(u.Z,{size:"small",sx:{borderRadius:"10px"},color:"error",variant:"contained",onClick:e.next,children:"Skip"})]}):(0,p.jsx)(l.Z,{style:{justifyContent:"center",marginBottom:"15px"},children:(0,p.jsx)(u.Z,{size:"small",color:e.close?"warning":"primary",variant:"contained",onClick:e.updateUser,children:e.close?"Close":"Update"})})]})}},9775:function(e,t,n){var s=n(885),r=n(2791),i=n(8870),a=n(703),o=n(7849),c=n(9646),d=n(5403),l=n(8326),u=n(501),p=n(6871),f=n(184);t.Z=function(e){var t=r.useState(e.value||0),n=(0,s.Z)(t,2),h=n[0],x=n[1],m=(0,p.s0)();return(0,f.jsx)(i.Z,{children:(0,f.jsx)(a.Z,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:(0,f.jsxs)(o.Z,{showLabels:!0,value:h,onChange:function(e,t){m("/".concat(t)),x(t)},children:[(0,f.jsx)(c.Z,{value:"find",label:"Find",icon:(0,f.jsx)(d.Z,{})}),(0,f.jsx)(c.Z,{value:"chat",label:"Chat",icon:(0,f.jsx)(l.Z,{})}),(0,f.jsx)(c.Z,{value:"profile",label:"Profile",icon:(0,f.jsx)(u.Z,{})})]})})})}}}]);
//# sourceMappingURL=424.25ef4614.chunk.js.map